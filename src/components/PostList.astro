---
/**
 * PostList - Displays a list of blog posts
 * Can optionally show summaries for the first N posts
 */
import type { PostListProps } from '../types';
import PostRow from './PostRow.astro';
import { calculateReadingTime } from '../lib/posts';
import { TOPIC_SLUGS } from '../config';

const { posts, showSummaryForFirst = 2 } = Astro.props as PostListProps;
---

{posts.length === 0 ? (
  <div class="py-16 text-center">
    <p class="text-muted">No posts yet in this topic.</p>
  </div>
) : (
  <div class="space-y-1">
    {posts.map((post, index) => (
      <PostRow
        title={post.data.title}
        date={post.data.date}
        readingTime={calculateReadingTime(post.body ?? '')}
        topic={post.data.topic}
        topicSlug={TOPIC_SLUGS[post.data.topic as keyof typeof TOPIC_SLUGS]}
        tags={post.data.tags}
        summary={post.data.summary}
        href={`/p/${post.id}`}
        showSummary={index < showSummaryForFirst}
      />
    ))}
  </div>
)}
